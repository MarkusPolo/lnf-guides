---
import { getCollection, getEntryBySlug } from 'astro:content';
import UpdateLayout from '../../layouts/UpdateLayout.astro';

export async function getStaticPaths() {
  const entries = await getCollection('updates');
  // Slugs sind z.B. "v0-1-1"
  return entries.map((e) => ({ params: { slug: e.slug } }));
}

const { slug } = Astro.params;
const entry = await getEntryBySlug('updates', String(slug));
if (!entry) return Astro.redirect('/404');

const { Content } = await entry.render();
const fm = entry.data;
---

<UpdateLayout frontmatter={fm}>
  <Content />
</UpdateLayout>
